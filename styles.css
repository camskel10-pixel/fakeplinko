*{box-sizing:border-box}
html,body{height:100%;margin:0;background:#0b1220;color:#e9eef9}
body{
  font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* Canvas fills view; board rendered with internal scale so it fits vertically */
#stage{
  display:block;width:100%;height:100dvh;touch-action:manipulation;
  background:radial-gradient(1200px 800px at 50% 15%, rgba(130,170,255,.10), rgba(0,0,0,0))
}

:root{
  --sideW: clamp(200px, 26vw, 300px);
  --sideW-compact: clamp(150px, 34vw, 200px);
  --cardTop:#233045; --cardBot:#1b273b; --edge:#2a3a54; --muted:#9fb3d8; --accent:#8cb6ff;
  --btnTop:#1f2d46; --btnBot:#11213a; --btnEdge:#3a5176; --greenTop:#2af07a; --greenBot:#17b856;
  --chipRed:#ef2b43; --chipOrange:#ff6b2e; --chipAmber:#ff9c2e; --chipYellow:#ffc43c; --chipPale:#ffd95a;
}

/* Side panels */
.side{
  position:fixed;top:0;bottom:0;width:var(--sideW);padding:12px;z-index:3;
  display:flex;flex-direction:column;gap:12px;overflow-y:auto;overscroll-behavior:contain;
  padding-top:calc(12px + env(safe-area-inset-top));
  padding-bottom:calc(12px + env(safe-area-inset-bottom));
}
#left{left:0;background:linear-gradient(180deg,#1f2b43,#182439);border-right:1px solid var(--edge);box-shadow:8px 0 24px rgba(0,0,0,.35)}
#right{right:0;background:linear-gradient(180deg,#1c263c,#152136);border-left:1px solid var(--edge);box-shadow:-8px 0 24px rgba(0,0,0,.35)}

.card{
  border:1px solid var(--edge);border-radius:14px;padding:10px;
  background:linear-gradient(180deg,var(--cardTop),var(--cardBot));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.06), inset 0 -1px 0 rgba(0,0,0,.25)
}
.title{font-weight:800;letter-spacing:.2px;color:var(--muted);margin:2px 2px 8px}
.subtle{float:right;color:#cfe0ff;opacity:.9}
.row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}

/* Segmented buttons (3D-ish) */
.seg{display:flex;border:1px solid var(--btnEdge);border-radius:12px;overflow:hidden}
.seg>button{
  border:0;min-width:40px;height:36px;padding:0 12px;color:#e9eef9;cursor:pointer;
  background:linear-gradient(180deg,var(--btnTop),var(--btnBot));
  box-shadow:inset 0 1px rgba(255,255,255,.15), inset 0 -1px rgba(0,0,0,.4);
}
.seg>button:focus{outline:none;box-shadow:0 0 0 2px rgba(140,182,255,.35) inset}
.seg>button.active{
  background:linear-gradient(180deg,#274165,#193052);
}

/* 3D selects */
.select3d{
  height:36px;padding:6px 34px 6px 10px;border-radius:10px;border:1px solid var(--btnEdge);
  color:#e9eef9;min-width:150px;font-weight:700;cursor:pointer;
  background:
    linear-gradient(180deg,#13213a,#0f1a2f) padding-box,
    linear-gradient(180deg,rgba(255,255,255,.2),rgba(0,0,0,.5)) border-box;
  appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath fill='%23cfe0ff' d='M0 0h10L5 6z'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position:right 10px center;
}
.select3d:focus{outline:none;box-shadow:0 0 0 2px rgba(140,182,255,.35)}

/* Inputs + buttons */
input[type=number]{
  height:36px;padding:6px 10px;border-radius:10px;border:1px solid var(--btnEdge);
  background:linear-gradient(180deg,#13213a,#0f1a2f);color:#e9eef9;min-width:74px;font-weight:700
}
input[type=range]{flex:1}
.btn{height:42px;border-radius:12px;border:1px solid rgba(0,0,0,.25);font-weight:900;letter-spacing:.2px;cursor:pointer}
.btn.green{color:#062312;background:linear-gradient(180deg,var(--greenTop),var(--greenBot));box-shadow:0 10px 24px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.35)}
.btn.dark{color:#e9eef9;background:linear-gradient(180deg,#192b48,#0f1a30);border-color:var(--btnEdge)}
.btn.sm{height:36px}
.btn.xs{height:34px;font-size:12px}
.btn:disabled{opacity:.45;cursor:not-allowed;box-shadow:none}
.stat{text-align:center;font-weight:800;letter-spacing:.2px}
.big{font-size:20px}

/* Ball color chips */
.chip{
  width:28px;height:28px;border-radius:50%;border:1px solid rgba(255,255,255,.18);
  box-shadow:0 4px 10px rgba(0,0,0,.35), inset 0 1px rgba(255,255,255,.2);
  background:linear-gradient(180deg,#2a3856,#0f1a2f); cursor:pointer;
}
.chip[data-color="#8cb6ff"]{background:radial-gradient(circle at 30% 30%, #e6f0ff, #8cb6ff)}
.chip[data-color="#ff8aa5"]{background:radial-gradient(circle at 30% 30%, #ffe6ee, #ff8aa5)}
.chip[data-color="#7ef7a4"]{background:radial-gradient(circle at 30% 30%, #eafff1, #7ef7a4)}
.chip[data-color="#ffd95a"]{background:radial-gradient(circle at 30% 30%, #fff7d9, #ffd95a)}
.chip[data-color="#c68cff"]{background:radial-gradient(circle at 30% 30%, #f1e6ff, #c68cff)}
.chip.active{outline:2px solid rgba(255,255,255,.7)}

/* Leaderboard + legend */
.lb{margin:0 0 8px 24px;padding:0}
.lb li{margin:2px 0}
.legend{margin:0;padding-left:18px;line-height:1.4;font-size:14px;color:var(--muted)}
.legend .dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px;vertical-align:middle}
.legend .dot.red{background:#ff5050}
.legend .dot.blue{background:#50a0ff}
.legend .dot.purple{background:#b460ff}
.legend .dot.gold{background:#ffd14d}
.legend .dot.pale{background:#ffd95a}
.legend .dot.white{background:#fff}

/* Compact on narrow screens */
@media (max-width: 900px){
  :root{ --sideW: var(--sideW-compact); }
  .title{font-size:13px}
  .seg>button{min-width:34px;height:32px;padding:0 8px;font-size:12px}
  input[type=number], .select3d{height:32px;font-size:12px}
  .btn{height:36px;font-size:13px}
}
