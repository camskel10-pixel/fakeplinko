*{box-sizing:border-box}
html,body{height:100%;margin:0;background:#0b1220;color:#e9eef9}
body{font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale}

/* Canvas fills view; board rendered with internal scale so it fits vertically */
#stage{display:block;width:100%;height:100dvh;touch-action:manipulation;background:radial-gradient(1200px 800px at 50% 15%, rgba(130,170,255,.10), rgba(0,0,0,0))}

:root{
  --sideW: clamp(200px, 26vw, 300px);
  --sideW-compact: clamp(150px, 34vw, 200px);
  --cardTop:#233045; --cardBot:#1b273b; --edge:#2a3a54; --muted:#9fb3d8; --accent:#8cb6ff;
  --btnTop:#1f2d46; --btnBot:#11213a; --btnEdge:#3a5176; --greenTop:#2af07a; --greenBot:#17b856;
  --chipRed:#ef2b43; --chipOrange:#ff6b2e; --chipAmber:#ff9c2e; --chipYellow:#ffc43c; --chipPale:#ffd95a;
}
.side{position:fixed;top:0;bottom:0;width:var(--sideW);padding:12px;display:flex;flex-direction:column;gap:12px;z-index:3;overflow-y:auto;overscroll-behavior:contain;padding-top:calc(12px + env(safe-area-inset-top));padding-bottom:calc(12px + env(safe-area-inset-bottom))}
#left{left:0;background:linear-gradient(180deg,#1f2b43,#182439);border-right:1px solid var(--edge);box-shadow:8px 0 24px rgba(0,0,0,.35)}
#right{right:0;background:linear-gradient(180deg,#1c263c,#152136);border-left:1px solid var(--edge);box-shadow:-8px 0 24px rgba(0,0,0,.35)}
.card{border:1px solid var(--edge);border-radius:14px;padding:10px;background:linear-gradient(180deg,var(--cardTop),var(--cardBot));box-shadow:inset 0 1px 0 rgba(255,255,255,.06), inset 0 -1px 0 rgba(0,0,0,.25)}
.title{font-weight:800;letter-spacing:.2px;color:var(--muted);margin:2px 2px 8px}
.row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.seg{display:flex;border:1px solid var(--btnEdge);border-radius:12px;overflow:hidden}
.seg>button{border:0;min-width:40px;height:36px;padding:0 12px;color:#e9eef9;background:linear-gradient(180deg,var(--btnTop),var(--btnBot));cursor:pointer}
.seg>button.active{background:linear-gradient(180deg,#274165,#193052)}
input[type=number], select{height:36px;padding:6px 10px;border-radius:10px;border:1px solid var(--btnEdge);background:linear-gradient(180deg,#13213a,#0f1a2f);color:#e9eef9;min-width:74px;font-weight:700}
input[type=range]{flex:1}
.btn{height:42px;border-radius:12px;border:1px solid rgba(0,0,0,.25);font-weight:900;letter-spacing:.2px;cursor:pointer}
.btn.green{color:#062312;background:linear-gradient(180deg,var(--greenTop),var(--greenBot));box-shadow:0 10px 24px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.35)}
.btn.dark{color:#e9eef9;background:linear-gradient(180deg,#192b48,#0f1a30);border-color:var(--btnEdge)}
.btn:disabled{opacity:.45;cursor:not-allowed;box-shadow:none}
.stat{font-weight:800;letter-spacing:.2px;text-align:center}

/* Compact on narrow screens */
@media (max-width: 900px){ :root{ --sideW: var(--sideW-compact); } .title{font-size:13px} .seg>button{min-width:34px;height:32px;padding:0 8px;font-size:12px} input[type=number], select{height:32px;font-size:12px} .btn{height:36px;font-size:13px} }
